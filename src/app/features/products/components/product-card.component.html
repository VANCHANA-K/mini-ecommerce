<div class="product-card">
  <div class="badge-container" *ngIf="discount || badge">
    <span *ngIf="discount" class="badge discount">-{{ discount }}%</span>
    <span *ngIf="badge" class="badge label">{{ badge }}</span>
  </div>

  <div class="product-image">
    <img [src]="product.image" [alt]="product.title" />
    <button
      class="favorite-btn"
      (click)="toggleFavorite()"
      [class.active]="isFavorite"
      title="{{ isFavorite ? 'Remove from favorites' : 'Add to favorites' }}">
      {{ isFavorite ? '❤️' : '🤍' }}
    </button>
  </div>
  <div class="product-content">
    <h3 class="product-title">{{ product.title }}</h3>
    <div class="product-price">${{ product.price | number:'1.2-2' }}</div>
    <div class="product-rating">
      <div class="stars">
        <ng-container *ngFor="let _ of stars; let i = index">
          <span class="star" [class.filled]="i < product.rating.rate">★</span>
        </ng-container>
      </div>
      <span class="rating-text">{{ product.rating.rate }}/5 ({{ product.rating.count }})</span>
    </div>

    <div class="cart-actions">
      <button
        class="add-to-cart-btn"
        (click)="addToCart()"
        [class.in-cart]="isInCart">
        @if (isInCart) {
          <span class="cart-indicator">
            <span class="cart-icon">🛒</span>
            <span class="quantity">{{ cartQuantity }}</span>
          </span>
          Add More
        } @else {
          <span class="cart-icon">🛒</span>
          Add to Cart
        }
      </button>
    </div>
  </div>
</div>
